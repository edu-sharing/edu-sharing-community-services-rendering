<?php 
global $Locale, $Translate;
$msg = array();
$msg['goToOrigin'] = new Phools_Message_Default('goToOrigin');
?>


<style>
<?php include(dirname(__FILE__) . '/../../css/dynamic.php'); ?>
<?php include(dirname(__FILE__) . '/../../css/metadata.css'); ?>
<?php include(dirname(__FILE__) . '/css/url.css'); ?>
</style>

<div class="edusharing_rendering_wrapper" vocab="http://schema.org/" typeof="WebPage">
	<h1 class="edusharing_rendering_content_title"><?php echo htmlentities($title) ?></h1>
	<div class="edusharing_rendering_content_wrapper" >
		<?php if(empty($embedding)) {
			echo '<img class="edusharing_rendering_content_preview" src="'.$previewUrl.'" alt="'.$title.'">';
		} else {
			echo $embedding;
		}?>
        <?php
        if(!$dataProtection) { ?>
		    <a href="<?php echo $url ?>" target="_blank" class="edusharing_rendering_content edusharing_rendering_content-origin" id="edusharing_rendering_content_href"><?php echo $msg['goToOrigin']->localize($Locale, $Translate);?></a>
        <?php
        }
        ?>
	</div>
	<?php echo $metadata; ?>
</div>

<?php
if (!$dataProtection) {
    $downloadUrl = Config::get('downloadUrl');
    if(!empty($downloadUrl)) {
        echo '<script>setTimeout(function() {try{window.ngRender.setDownloadUrl("'.$downloadUrl.'");}catch(err){console.log(err)}}, 1000);</script>';
    }
}
?>

